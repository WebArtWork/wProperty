import{a as v,b as y}from"./chunk-ICYEOZPQ.js";import{e as K,h as L,k as Q}from"./chunk-4JG5HFOE.js";import{a as z}from"./chunk-VV24HN3E.js";import{A as M,Ab as $,Db as Y,Fa as O,Ja as k,K as p,Ka as P,La as D,O as m,P as u,Q as x,U as R,V as F,Vb as G,Xa as q,Xb as h,_b as J,ba as f,bb as B,ca as t,da as r,ea as l,f as _,ia as I,ja as d,jb as H,ka as T,pb as N,ta as b,ua as s,v as E,va as j,wa as g,wb as A,z as w,zb as V}from"./chunk-7J63SMGH.js";var W=(()=>{let i=class i{constructor(e,n,o,c,S){this._form=e,this._propertyrecordService=n,this._core=o,this._alert=c,this._translate=S,this.form=this._form.getForm("propertyrecord",v),this.load=new F}update(){this._form.modal(this.form,[],this.record).then(e=>{this._core.copy(e,this.record),this._propertyrecordService.update(this.record)})}delete(){this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this record?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>_(this,null,function*(){this._propertyrecordService.delete(this.record).subscribe(()=>{this.load.emit()})})}]})}};i.\u0275fac=function(n){return new(n||i)(m(h),m(y),m($),m(V),m(G))},i.\u0275cmp=u({type:i,selectors:[["app-history"]],inputs:{record:"record"},outputs:{load:"load"},standalone:!1,decls:30,vars:8,consts:[[1,"documents__name","records-title"],[1,"documents__description","records__description"],[1,"documents__comments","records-comments"],[1,"materials-wrapper"],[1,"materials-wrapper__icon"],[1,"materials-wrapper__text"],[1,""],[1,"records__bottom"],[1,"documents__price","records__price"],[1,"documents-time"],[1,"documents-time__icon"],[1,"material-icons"],[1,"documents-time__text"],[1,"property-links"],[1,"property-links__wrap"],[1,"material-icons",3,"click"]],template:function(n,o){n&1&&(t(0,"div",0),s(1),r(),t(2,"div",1),s(3),r(),t(4,"div",2),s(5,` Comments block lorem ipsjun asdsadsad
`),r(),t(6,"div",3),l(7,"div",4),t(8,"div",5),s(9," Responsible: "),t(10,"span",6),s(11,"5 years"),r()()(),t(12,"div",7)(13,"div",8),s(14,"$expenses"),r(),t(15,"div",9)(16,"div",10)(17,"span",11),s(18,"calendar_today"),r()(),t(19,"div",12),s(20),k(21,"mongodate"),k(22,"date"),r()()(),t(23,"div",13)(24,"div",14)(25,"span",15),d("click",function(){return o.update()}),s(26,"edit"),r()(),t(27,"div",14)(28,"span",15),d("click",function(){return o.delete()}),s(29,"delete"),r()()()),n&2&&(p(),j(o.record.name),p(2),g(" ",o.record.description,`
`),p(17),g(" ",D(22,5,P(21,3,o.record._id),"d MMMM y")," "))},dependencies:[B,Y],encapsulation:2});let a=i;return a})();var re=()=>["sell / buy payment","service","materials","rent payment","incident"];function oe(a,i){if(a&1){let C=I();t(0,"div",22)(1,"app-history",23),d("load",function(){w(C);let n=T();return M(n.load())}),r()()}if(a&2){let C=i.$implicit;p(),f("record",C)}}var X=(()=>{let i=class i{constructor(e,n,o){this._recordService=e,this._route=n,this._form=o,this.propertyRecords=[],this.isMenuOpen=!1,this.property_id="",this.form=this._form.getForm("propertyrecord",v),this.type="",this._route.paramMap.subscribe(c=>{this.property_id=c.get("property_id")||"",this.load()})}create(){this._form.modal(this.form,{label:"Create",click:(e,n)=>_(this,null,function*(){n(),this._preCreate(e),this._recordService.create(e).subscribe(()=>{this.load()})})})}load(){this._recordService.get({page:1,query:this._query()}).subscribe(e=>{this.propertyRecords.splice(0,this.propertyRecords.length),this.propertyRecords.push(...e)})}_query(){let e="";return this.property_id&&(e+=(e?"&":"")+"property="+this.property_id),this.type&&(e+=(e?"&":"")+"type="+this.type),e}_preCreate(e){delete e.__created,this.property_id&&(e.property=this.property_id),this.type&&(e.property=this.type)}};i.\u0275fac=function(n){return new(n||i)(m(y),m(H),m(h))},i.\u0275cmp=u({type:i,selectors:[["ng-component"]],standalone:!1,decls:30,vars:9,consts:[[1,"documents-wrapper"],[1,"documents-container"],[1,"documents-list"],[1,"documents-header"],[1,"documents-header-left"],["translate","",1,"documents-header__title"],[1,"burger-wrap"],[1,"material-icons","mr-5",3,"click"],[1,"material-icons",3,"click"],[1,"documents-sidebar"],[1,"documents-sidebar__close",3,"click"],[1,"material-icons"],[1,"documents-sidebar-content"],[1,"documents-sidebar__img"],["src","assets/default.png","alt","Sidebar Image"],[1,"documents-sidebar__title"],[1,"documents-sidebar__description"],[1,"mb-10",3,"click"],[3,"modelChange","items","placeholder","clearable"],[1,"documents-main"],[1,"documents-main-content"],["class","documents-main-row",4,"ngFor","ngForOf"],[1,"documents-main-row"],[1,"documents_records_box",3,"load","record"]],template:function(n,o){n&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),l(5,"core-back")(6,"core-profile"),r(),t(7,"div",5),s(8," Myproperties.Real estate history "),r(),t(9,"div",6)(10,"i",7),d("click",function(){return o.isMenuOpen=!o.isMenuOpen}),s(11,"tune"),r(),t(12,"i",8),d("click",function(){return o.create()}),s(13,"add"),r()()(),t(14,"div",9)(15,"div",10),d("click",function(){return o.isMenuOpen=!o.isMenuOpen}),t(16,"span",11),s(17,"close"),r()(),t(18,"div",12)(19,"div",13),l(20,"img",14),r(),t(21,"div",15),s(22,"Records"),r(),t(23,"div",16)(24,"wbutton",17),d("click",function(){return o.create()}),s(25,"Create"),r(),t(26,"wselect",18),d("modelChange",function(S){return o.type=S,o.load()}),r()()()(),t(27,"div",19)(28,"div",20),R(29,oe,2,1,"div",21),r()()()()()),n&2&&(b("documents-wrapper--open",o.isMenuOpen),p(14),b("documents-sidebar--open",o.isMenuOpen),p(12),f("items",O(8,re))("placeholder","Type")("clearable",!0),p(3),f("ngForOf",o.propertyRecords))},dependencies:[J,z,q,A,K,L,W],encapsulation:2});let a=i;return a})();var ne=[{path:":id",component:X}],Re=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=x({type:i}),i.\u0275inj=E({imports:[N.forChild(ne),Q]});let a=i;return a})();export{Re as RecordsModule};
